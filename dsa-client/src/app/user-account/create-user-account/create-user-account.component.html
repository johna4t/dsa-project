<div class="container" mt-5>
  <h2>Create new user</h2>
  <div class="card p-2">
    <form [formGroup]="userAccountForm" (ngSubmit)="onSubmit()">

      <!-- First name -->
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>First name</mat-label>
        <input matInput formControlName="firstName" placeholder="Enter first name">
        <mat-error *ngIf="firstName?.invalid && firstName?.touched">First name required (min 2 characters)</mat-error>
      </mat-form-field>

      <!-- Last name -->
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Last name</mat-label>
        <input matInput formControlName="lastName" placeholder="Enter last name">
        <mat-error *ngIf="lastName?.invalid && lastName?.touched">Last name required (min 2 characters)</mat-error>
      </mat-form-field>

      <!-- Email -->
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Email address</mat-label>
        <input matInput formControlName="email" placeholder="Enter email">
        <mat-error *ngIf="email?.invalid && email?.touched">Valid email is required</mat-error>
      </mat-form-field>

      <!-- Contact number -->
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Contact number</mat-label>
        <input matInput formControlName="contactNumber" placeholder="Enter contact number">
        <mat-error *ngIf="contactNumber?.invalid && contactNumber?.touched">Minimum 5 characters required</mat-error>
      </mat-form-field>

      <!-- Job title -->
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Job title</mat-label>
        <input matInput formControlName="jobTitle" placeholder="Enter job title (optional)">
      </mat-form-field>

      <!-- Role selection -->
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Role</mat-label>
        <mat-select formControlName="role">
          <mat-option *ngFor="let role of availableRoles" [value]="role">
            {{ role.name }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="userAccountForm.get('role')?.invalid && userAccountForm.get('role')?.touched">
          Role is required
        </mat-error>
      </mat-form-field>

      <!-- Password -->
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Password</mat-label>
        <input matInput type="password" formControlName="password" placeholder="Enter password">
        <mat-error *ngIf="password?.hasError('minlength') && password?.touched">
          Password must be at least 5 characters
        </mat-error>
        <mat-error *ngIf="password?.hasError('required') && password?.touched">
          Password is required
        </mat-error>
      </mat-form-field>

      <!-- Confirm password -->
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Confirm password</mat-label>
        <input matInput type="password" formControlName="confirmPassword" placeholder="Re-enter password">
        <mat-error *ngIf="userAccountForm.hasError('matchPasswordError') && confirmPassword?.touched">
          Passwords do not match
        </mat-error>
      </mat-form-field>

      <!-- Submit / Cancel -->
      <div align="right">
        <button mat-flat-button color="primary" type="submit" [disabled]="formIsInvalid()" style="margin:5px;">
          Submit
        </button>
        <button mat-flat-button color="accent" type="button" style="margin:5px;" routerLink="/user-accounts">
          Cancel
        </button>
      </div>

    </form>
  </div>
</div>
